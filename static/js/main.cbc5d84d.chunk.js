(this.webpackJsonpgp_finder=this.webpackJsonpgp_finder||[]).push([[0],{32:function(t,e,n){},33:function(t,e,n){},34:function(t,e,n){},53:function(t,e,n){"use strict";n.r(e);var i=n(0),c=n.n(i),s=n(11),a=n.n(s),o=n(4),l=n(57),r=n(58),u=n(55),j=n(56),p=n(54),b=n(1),m=function(t){var e=t.position,n=t.setPosition,c=Object(p.a)({locationfound:function(t){n(t.latlng),c.flyTo(t.latlng,c.getZoom())}});return Object(i.useEffect)((function(){e||c.locate()}),[]),null===e?null:Object(b.jsx)(u.a,{position:e,children:Object(b.jsx)(j.a,{children:"You are here"})})},d=n(13),h=n(5),O=n(24),f=(n(32),function(t){var e=t.doctorsPosition,n=t.appointmentsList,c=t.setAppointmentsList,s=Object(i.useState)({label:e.label,name:"",email:"",datetime:""}),a=Object(o.a)(s,2),l=a[0],r=a[1],u=function(t){var e=t.target,n=e.value,i=e.name;r((function(t){return Object(h.a)(Object(h.a)({},t),{},Object(d.a)({},i,n))}))};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:e.label}),Object(b.jsxs)("form",{className:"form-container",onSubmit:function(){},children:[Object(b.jsxs)("label",{children:["Name",Object(b.jsx)("input",{required:!0,className:"text-input",name:"name",type:"text",onChange:u})]}),Object(b.jsxs)("label",{children:["Email",Object(b.jsx)("input",{required:!0,className:"text-input",name:"email",type:"text",onChange:u})]}),Object(b.jsxs)("label",{children:["Preferred Time",Object(b.jsx)("input",{required:!0,className:"text-input",type:"datetime-local",name:"datetime",onChange:u})]}),Object(b.jsx)("input",{style:{marginTop:10},type:"button",value:"Book Appointment",onClick:function(){0===l.name.length||0===l.email.length||0===l.datetime.length?alert("Please fill in all fields before submitting"):(c([].concat(Object(O.a)(n),[l])),alert("Booking successful!"))}})]})]})}),g=function(t){var e=t.appointmentsList,n=t.setAppointmentsList,i=t.userPosition,c=t.setUserPosition,s=t.doctorsPosition;return Object(b.jsxs)(l.a,{center:i?[i.lat,i.lng]:[51.505,-.09],zoom:13,scrollWheelZoom:!0,style:{height:"80vh"},children:[Object(b.jsx)(r.a,{attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),Object(b.jsx)(m,{position:i,setPosition:c}),s.length>0&&i&&s.map((function(t,i){return Object(b.jsx)(u.a,{position:[t.latitude,t.longitude],children:Object(b.jsx)(j.a,{children:Object(b.jsx)(f,{appointmentsList:e,setAppointmentsList:n,doctorsPosition:t})})},i)}))]})},x=(n(33),n(34),function(t){var e=t.view,n=t.setView,i=function(t){n(t)};return Object(b.jsxs)("header",{children:[Object(b.jsx)("h1",{children:"GP Finder"}),Object(b.jsxs)("ul",{className:"navigation",children:[Object(b.jsx)("li",{onClick:function(){i("mapDisplay")},className:"navigation-item",style:"mapDisplay"===e?{fontWeight:"bold"}:{},children:"Find a Doctor"}),Object(b.jsx)("li",{onClick:function(){i("appointmentsList")},className:"navigation-item",style:"appointmentsList"===e?{fontWeight:"bold"}:{},children:"Appointments List"})]})]})}),y=function(t){var e=t.appointmentsList;return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)("h2",{children:"Appointments"}),e.map((function(t,e){return Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:t.label}),Object(b.jsx)("li",{children:t.name}),Object(b.jsx)("li",{children:t.email}),Object(b.jsx)("li",{children:new Date(t.datetime).toDateString()})]},e)}))]})},v=n(15),L=n.n(v),P="ec9f89e4efe3473d6c48f999555798c9",k=function(){var t=Object(i.useState)("mapDisplay"),e=Object(o.a)(t,2),n=e[0],c=e[1],s=Object(i.useState)([]),a=Object(o.a)(s,2),l=a[0],r=a[1],u=Object(i.useState)(null),j=Object(o.a)(u,2),p=j[0],m=j[1],d=Object(i.useState)(null),h=Object(o.a)(d,2),O=h[0],f=h[1],v=Object(i.useState)([]),k=Object(o.a)(v,2),S=k[0],C=k[1];return Object(i.useEffect)((function(){var t;p&&(t=p,L.a.get("http://api.positionstack.com/v1/reverse?access_key=".concat(P,"&query=").concat(t.lat,",").concat(t.lng))).then((function(t){return f(t.data.data[0].locality)})).catch((function(t){return console.log(t)}))}),[p]),Object(i.useEffect)((function(){O&&function(t){return L.a.get("http://api.positionstack.com/v1/forward?access_key=".concat(P,"&query=medical&region=").concat(t,"&limit=20"))}(O).then((function(t){return C(t.data.data)})).catch((function(t){return console.log(t)}))}),[O]),Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(x,{view:n,setView:c}),"mapDisplay"===n?Object(b.jsx)(g,{appointmentsList:l,setAppointmentsList:r,userPosition:p,setUserPosition:m,userLocality:O,doctorsPosition:S}):Object(b.jsx)(y,{appointmentsList:l})]})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(e){var n=e.getCLS,i=e.getFID,c=e.getFCP,s=e.getLCP,a=e.getTTFB;n(t),i(t),c(t),s(t),a(t)}))};a.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root")),S()}},[[53,1,2]]]);
//# sourceMappingURL=main.cbc5d84d.chunk.js.map